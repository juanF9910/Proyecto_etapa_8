<div *ngIf="isAuthenticated; else noAuth">
  <div class="comments-section" *ngIf="displayedComments.length > 0; else noComments">
    <h3 class="comments-title">Comentarios:</h3>
    <ul class="comments-list">
      <li class="comment" *ngFor="let comment of displayedComments">
        <p class="comment-content">{{ comment.content }}</p>
        <small class="comment-author">
          Escrito por: {{ comment.username }} | {{ comment?.created_at | date:'short' }}
        </small>
      </li>
    </ul>

    <!-- Paginación -->
    <div class="pagination">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Anterior</button>
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Siguiente</button>
    </div>
  </div>

  <ng-template #noComments>
    <p class="no-comments">No hay comentarios para este post.</p>
  </ng-template>

  <!-- Mensaje de error -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div class="comment-box">
    <h4>Añadir un comentario</h4>
    <textarea [(ngModel)]="commentContent" placeholder="Escribe tu comentario aquí..." class="comment-input"></textarea>

    <div class="button-group">
      <button (click)="addCommentToPost()" [disabled]="!commentContent" class="submit-btn">
        Enviar
      </button>
      <button (click)="clearCommentInput()" class="cancel-btn">
        Cancelar
      </button>
    </div>
  </div>
</div>

<ng-template #noAuth>
  <p class="no-auth-message">Por favor, inicia sesión para ver y añadir comentarios.</p>
</ng-template>
