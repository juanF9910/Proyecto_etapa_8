<div class="register-container">
  <form [formGroup]="form" (ngSubmit)="register()">
    <h2>Register</h2>

    <!-- Username Field -->
    <div class="form-group">
      <label for="username">Username</label>
      <input
        id="username"
        type="text"
        class="form-control"
        formControlName="username"
        placeholder="Enter your username"
      />
      <!-- <div *ngIf="nameField.invalid && nameField.touched" class="invalid-feedback">
        Username is required.
      </div> -->

      <div *ngIf="nameField.invalid && nameField.touched" class="error-message">
        <span *ngIf="nameField.hasError('required')">El email es obligatorio.</span>
        <span *ngIf="nameField.hasError('invalidEmail')">El formato del email es inválido</span>
      </div>


    </div>

    <!-- Password Field -->
    <div class="form-group password-wrapper">
      <label for="password">Password</label>
      <div class="password-container">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          formControlName="password"
          class="form-control"
          placeholder="Enter your password"
        />
        <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
          {{ showPassword ? '🙈' : '👁️' }}
        </button>
      </div>
      <div *ngIf="passwordField.invalid && passwordField.touched" class="invalid-feedback">
        Password is required.
      </div>
    </div>

    <!-- Confirm Password Field -->
    <div class="form-group password-wrapper">
      <label for="confirm_password">Confirm Password</label>
      <div class="password-container">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirm_password"
          formControlName="confirm_password"
          class="form-control"
          placeholder="Confirm your password"
        />
        <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
          {{ showConfirmPassword ? '🙈' : '👁️' }}
        </button>
      </div>
      <div *ngIf="confpasswordField.invalid && confpasswordField.touched" class="invalid-feedback">
        Confirmation password is required.
      </div>
    </div>

    <!-- Buttons (Register & Cancel) -->
    <div class="button-group">
      <button type="submit" class="btn btn-primary" [disabled]="status === 'loading'">
        {{ status === 'loading' ? 'Registering...' : 'Register' }}
      </button>
      <button type="button" class="btn btn-secondary cancel-btn" (click)="navigateToHome()">
        Cancel
      </button>
    </div>

    <!-- Status Messages -->
    <div *ngIf="status === 'error'" class="error-message">
      Registration failed. Please try again.
    </div>
    <div *ngIf="status === 'success'" class="success-message">
      Registration successful! Redirecting to login...
    </div>

    <!-- Redirect to Login -->
    <div class="redirect-to-register">
      <p>Already have an account?
        <a (click)="navigateToLogin()">Log in</a>
      </p>
    </div>
  </form>


</div>
